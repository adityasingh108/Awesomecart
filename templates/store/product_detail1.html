{% extends 'base.html' %}
{% load static %}

{% block content %}
<style>
	.carousel-indicators{
		bottom: -27px;
	}
</style>
<section class="section-content padding-y bg">
	<div class="container">

		<!-- ============================ COMPONENT 1 ================================= -->
		<div class="card">
			<div class="row no-gutters">
				<aside class="col-md-6">
                 
					<article class=" ">
						<div class="img-big-wrap ">
						   
							<div id="carouselExampleFade" class="carousel slide carousel-fade" data-ride="carousel">
								<br>
								<ol class="carousel-indicators" class='carousel-indicators' >
								  {% for  i in   product_gallery %}	
								  <li style="background-color: rgb(121, 121, 235);" data-target="#carouselExampleIndicators" data-slide-to="{{i}}" class="active"></li>
								  {% endfor %}
						
								</ol>
								<div class="carousel-inner">
									<br>
									<div class="carousel-item active text-center ml-2">
										<!-- <img src="" class="d-block w-100" alt="..."> -->
										<a href="{{single_product.images.url}} "> <img src="{{single_product.images.url}}" class="img" alt="Product Image"> </a>
									</div>
									<br>
									{% for i in product_gallery%}
										<div class="carousel-item text-center ml-2">  
											<a href="{{i.image.url}}" > <img src="{{i.image.url}}" class="img" alt="Product Image"></a>
										</div>
								    {% endfor %}
									
								</div>
									<a id="button" class="carousel-control-prev " href="#carouselExampleFade" role="button" data-slide="prev">
										<span  class="carousel-control-prev-icon " aria-hidden="false" style="background-color: rgb(120, 120, 213);"></span>
										<span class="sr-only">Previous</span>
									</a>
									<a id="button" class="carousel-control-next button-carausaul" href="#carouselExampleFade" role="button" data-slide="next">
										<span  class="carousel-control-next-icon  " aria-hidden="false" style="background-color: rgb(120, 120, 213);"></span>
										<span class="sr-only">Next</span>
									</a>
							</div>


						</div> 

					</article> 
				 
					
				</aside>
				<main class="col-md-6 border-left">
					<form action="{% url 'add_cart' single_product.id %}" method="POST">
						{% csrf_token %}
						<article class="content-body">

							<h2 class="title">{{single_product.product_name}}</h2>
							<div class="rating-star">
								<span>
									<i class="fa fa-star{% if single_product.averageReview  < 0.5 %}-o {% elif single_product.averageReview  >= 0.5 and single_product.averageReview < 1 %}-half-o {% endif %} " aria-hidden="true" ></i>
									<i class="fa fa-star{% if single_product.averageReview  < 1.5 %}-o {% elif single_product.averageReview  >= 1.5 and single_product.averageReview < 2 %}-half-o {% endif %} " aria-hidden="true" ></i>
									<i class="fa fa-star{% if single_product.averageReview  < 2.5 %}-o {% elif single_product.averageReview  >= 2.5 and single_product.averageReview < 3 %}-half-o {% endif %} " aria-hidden="true" ></i>
									<i class="fa fa-star{% if single_product.averageReview  < 3.5 %}-o {% elif single_product.averageReview  >= 3.5 and single_product.averageReview < 4 %}-half-o {% endif %} " aria-hidden="true" ></i>
									<i class="fa fa-star{% if single_product.averageReview  < 4.5 %}-o {% elif single_product.averageReview  >= 4.5 and single_product.averageReview < 5 %}-half-o {% endif %} " aria-hidden="true" ></i>
									   <span>{{single_product.coutReview}} Reviewss</span>
								</span>
							</div>

							<div class="mb-3">
								<var class="price h4">${{single_product.price}}</var>
							</div>

							<p> {{single_product.description|safe}}</p>


							<hr>
							<div class="row">
								<div class="item-option-select">
									<h6>Choose Color</h6>
									<select name="color" class="form-control" required>
										<option value="" disabled selected>Select</option>
										{% for i in single_product.variation_set.colors %}
										<option class="form-item" value="{{i.variation_value | lower}}">
											{{i.variation_value |capfirst}}</option>
										{% endfor %}
									</select>
								</div>
							</div> <!-- row.// -->
							<div class="row">
								<div class="item-option-select">
									<h6>Select Size</h6>

									<select name="size" id="" class="form-control" required>
										<option value="" disabled selected>Select</option>
										{% for i in single_product.variation_set.sizes %}
										<option value="{{i.variation_value | lower}}">{{i.variation_value |capfirst}}
										</option>
										{% endfor %}
									</select>

								</div>
							</div> <!-- row.// -->
							<hr>
							{% if single_product.stock <= 0 %} <h5 class='text-danger'> Out of stock</h5>

								{% else %}


								<button type="submit" class="btn  btn-primary"> <span class="text">Add to cart</span> <i
										class="fas fa-shopping-cart"></i></button>

								{% endif %}
						</article> <!-- product-info-aside .// -->
					</form>
				</main> <!-- col.// -->

			</div> <!-- row.// -->
		</div> <!-- card.// -->
		<!-- ============================ COMPONENT 1 END .// ================================= -->

		<br>

		<div class="row">
			<div class="col-md-9">

			

				<form action="{% url 'submit_review'  single_product.id %}" method="POST">
					{% csrf_token %}
					<h5 class="text-primary">Write your Reviews</h5>
					<div>
						<!-- rating star  -->
						<label > How do you rate product</label>
						<br>
						<div class="rate">
							<input type="radio" name="rating" id="rating10" value="5" required /><label for="rating10" title="5"></label>
							<input type="radio" name="rating" id="rating9" value="4.5" required /><label for="rating9" class="half" title="4.5"></label>
							<input type="radio" name="rating" id="rating8" value="4" required /><label for="rating8" title="4"></label>
							<input type="radio" name="rating" id="rating7" value="3.5" required /><label for="rating7" class="half" title="3.5"></label>
							<input type="radio" name="rating" id="rating6" value="3" required /><label for="rating6" title="3"></label>
							<input type="radio" name="rating" id="rating5" value="2.5" required /><label for="rating5" class="half" title="2.5"></label>
							<input type="radio" name="rating" id="rating4" value="2" required /><label for="rating4" title="2"></label>
							<input type="radio" name="rating" id="rating3" value="1.5" required /><label for="rating3"class="half" title="1.5"></label>
							<input type="radio" name="rating" id="rating2" value="1" required /><label for="rating2" title="1"></label>
							<input type="radio" name="rating" id="rating1" value="0.5" required /><label for="rating1" class="half" title="0.5"></label>
						</div>
						<br>
						Review Title:
						<input type="text" class="form-control" name="subject" required>
						<br>
						<textarea name="review" id="review"  rows="5" class="form-control" required></textarea>
						<br>
						{% if user.is_authenticated %}
						  {% if order_product %}
						  		<input type="submit" value="Submit Review" class=" btn btn-primary">
						 	 {% else %}
						  		<p class="text">Purchese this product To Review !</p>
                          {% endif %}
						{% else %}
						<p class="text">Please log in to review the post <a href="{% url 'login' %}">Login</a></p>
						{% endif %}
					</div>
               </form>
			   {% include "includes/alerts.html" %}
				<header class="section-heading">
					<h3 class="text-primary">Customer Reviews </h3>
                    <div class="rating-star">
						<span>
							<i class="fa fa-star{% if single_product.averageReview  < 0.5 %}-o {% elif single_product.averageReview  >= 0.5 and single_product.averageReview < 1 %}-half-o {% endif %} " aria-hidden="true" ></i>
							<i class="fa fa-star{% if single_product.averageReview  < 1.5 %}-o {% elif single_product.averageReview  >= 1.5 and single_product.averageReview < 2 %}-half-o {% endif %} " aria-hidden="true" ></i>
							<i class="fa fa-star{% if single_product.averageReview  < 2.5 %}-o {% elif single_product.averageReview  >= 2.5 and single_product.averageReview < 3 %}-half-o {% endif %} " aria-hidden="true" ></i>
							<i class="fa fa-star{% if single_product.averageReview  < 3.5 %}-o {% elif single_product.averageReview  >= 3.5 and single_product.averageReview < 4 %}-half-o {% endif %} " aria-hidden="true" ></i>
							<i class="fa fa-star{% if single_product.averageReview  < 4.5 %}-o {% elif single_product.averageReview  >= 4.5 and single_product.averageReview < 5 %}-half-o {% endif %} " aria-hidden="true" ></i>
							   <span>{{single_product.coutReview}} Reviewss</span>
						</span>
					</div>

				</header>
			{% for review in reviews %}
				  
				<article class="box mb-3">
					<div class="icontext w-100">
						<!-- <img src="{{ review.user.profile_picture.url }}" class="img-xs icon rounded-circle"> -->
						<div class="text">
							<span class="date text-muted float-md-right">{{review.updated_at}} </span>
							<h6 class="mb-1">{{review.user.full_name}}</h6>
							<h6 class="mb-1">
								<div class="rating-star">
									<span>
										<i class="fa fa-star{% if review.rating == 0.5%}-half-o{% elif review.rating < 1 %}-o {% endif %}" aria-hidden="true" ></i>
										<i class="fa fa-star{% if review.rating == 1.5%}-half-o{% elif review.rating < 2 %}-o {% endif %}" aria-hidden="true" ></i>
										<i class="fa fa-star{% if review.rating == 2.5%}-half-o{% elif review.rating < 3 %}-o {% endif %}" aria-hidden="true" ></i>
										<i class="fa fa-star{% if review.rating == 3.5%}-half-o{% elif review.rating < 4 %}-o {% endif %}" aria-hidden="true" ></i>
										<i class="fa fa-star{% if review.rating == 4.5%}-half-o{% elif review.rating < 5 %}-o {% endif %}" aria-hidden="true" ></i>
									</span>
								</div>
							</h6>
							
						</div>
					</div> <!-- icontext.// -->
					<div class="mt-3">
						<h6>{{review.subject}}</h6>
						<p> {{review.review}}</p>
					</div>
				</article>
				
			{% endfor %}


			</div> <!-- col.// -->
		</div> <!-- row.// -->


	</div> <!-- container .//  -->
</section>
<!-- ========================= SECTION CONTENT END// ========================= -->
<script>
	$('.carousel').carousel({
  interval: 50000
})
</script>

{% endblock %}